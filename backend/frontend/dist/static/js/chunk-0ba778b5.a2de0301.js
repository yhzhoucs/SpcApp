(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ba778b5"],{"27fc":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-container"},[t._m(0),s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("div",{staticClass:"card"},[t._m(1),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-4 col-lg col-md-4 col-sm-4 col-12"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.myform.modify,expression:"myform.modify"}],staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.myform.userid,expression:"myform.userid"}],staticClass:"custom-select",attrs:{value:"default"},on:{click:function(e){return t.findRole()},change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.myform,"userid",e.target.multiple?s:s[0])}}},t._l(t.useridform,(function(e,o){return s("option",{key:o,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.myform.modify,expression:"!myform.modify"}],staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.myform.userid,expression:"myform.userid"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.myform.userid},on:{input:function(e){e.target.composing||t.$set(t.myform,"userid",e.target.value)}}})])])])])])]),s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("div",{staticClass:"card"},[t._m(2),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-4 col-lg col-md-4 col-sm-4 col-12"},[s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.myform.checkrole,expression:"myform.checkrole"}],staticClass:"custom-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.myform,"checkrole",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"admin"}},[t._v("主管")]),s("option",{attrs:{value:"super_editor"}},[t._v("用户管理员")]),s("option",{attrs:{value:"viewer"}},[t._v("员工")])])])])])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"viewer"===t.myform.checkrole,expression:"myform.checkrole === 'viewer'"}],staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("div",{staticClass:"card"},[t._m(3),s("div",{staticClass:"card-body"},[s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},t._l(t.myform.relations,(function(e,o){return s("div",{key:o},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"item.checked"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"checkbox_"+o},domProps:{value:e.workshopId,checked:Array.isArray(e.checked)?t._i(e.checked,e.workshopId)>-1:e.checked},on:{change:function(s){var o=e.checked,i=s.target,r=!!i.checked;if(Array.isArray(o)){var c=e.workshopId,a=t._i(o,c);i.checked?a<0&&t.$set(e,"checked",o.concat([c])):a>-1&&t.$set(e,"checked",o.slice(0,a).concat(o.slice(a+1)))}else t.$set(e,"checked",r)}}}),s("label",{staticClass:"custom-control-label mr-5",attrs:{for:"checkbox_"+o}},[t._v(t._s(e.workshopId))])])})),0)])])]),s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.submitRelatonship()}}},[t._v(" 提交 ")])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-header"},[s("div",{staticClass:"page-header"},[s("h4",[t._v("用户管理")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"card-title"},[s("div",{staticClass:"card-title"},[t._v("选择用户")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"card-title"},[t._v("选择角色")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"card-title"},[t._v("选择车间")])])}],r=s("c24f"),c=s("5a7b"),a={name:"UserManage.vue",data:function(){return{workshopform:[],useridform:[],relationshipform:[],myform:{checkrole:"",userid:"",modify:!0,relations:[]}}},methods:{changeMordifychoose:function(){this.myform.modify=!this.myform.modify,this.myform.userid=""},changeMordify:function(){this.myform.modify=!this.myform.modify,this.myform.userid=""},selectChange:function(t){this.userid=t,this.userid in this.getUserId()?this.mordify=!1:this.mordify=!0},findRole:function(){console.log("OK2");for(var t=0;t<this.useridform.length;t++)this.useridform[t]["id"]===this.myform.userid&&(this.myform.checkrole=this.useridform[t]["checkrole"]);"viewer"===this.myform.checkrole&&this.getRelations()},getUserId:function(){var t=this;r["a"].getUserId((function(e){return t.useridform=e}),(function(){}),(function(){}))},getRelationshipForm:function(){var t=this;c["a"].getRelationshipForm(this.myform.userid,(function(e){return t.relationshipform=e}),(function(){}),(function(){}))},getAllWorkshopsId:function(){var t=this;c["a"].getAllWorkshopsId((function(e){return t.workshopform=e}),(function(){}),(function(){}))},getRelations:function(){console.log("OK"),this.myform.relations=[];for(var t=0;t<this.workshopform.length;t++){this.myform.relations.push({}),this.myform.relations[t]["workshopId"]=this.workshopform[t]["id"];for(var e=0;e<this.relationshipform.length;e++)if(this.myform.relations[t]["checked"]=!1,this.relationshipform[e]["workshopid"]===this.workshopform[t]["id"]){this.myform.relations[t]["checked"]=!0;break}}},submitRelatonship:function(){c["a"].submitRelatonship(this.myform)}},mounted:function(){this.getUserId(),this.getAllWorkshopsId()}},l=a,n=(s("6193"),s("2877")),m=Object(n["a"])(l,o,i,!1,null,"1df4d9fb",null);e["default"]=m.exports},6193:function(t,e,s){"use strict";s("917b")},"917b":function(t,e,s){}}]);
//# sourceMappingURL=chunk-0ba778b5.a2de0301.js.map