(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-228a36de"],{"0d6a":function(t,o,s){"use strict";var i=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.showHint,expression:"showHint"}],class:["alert",t.isError?"alert-danger":"alert-success"]},[t._v(t._s(t.hintMsg))])},n=[],e={name:"HintMessage",data:function(){return{showHint:!1,showTime:1500}},props:["isError","hintMsg"],methods:{show:function(){var t=this;t.showHint=!0,setTimeout((function(){t.showHint=!1}),t.showTime)}}},a=e,r=s("2877"),l=Object(r["a"])(a,i,n,!1,null,"88f5cfde",null);o["a"]=l.exports},"54e8":function(t,o,s){"use strict";s.r(o);var i=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"main-container"},[t._m(0),s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table m-0"},[t._m(1),s("tbody",t._l(t.workshops,(function(o,i){return s("tr",{key:i},[s("td",[t._v(t._s(o.id))]),s("td",[t._v(t._s(o.name))]),s("td",[t._v(t._s(t.getProductName(o.productId)))]),s("td",[t._v(t._s(o.batchSize))]),s("td",[t._v(t._s(o.windowSize))]),s("td",[t._v(t._s(o.description))]),s("td",[s("div",{staticClass:"btn-group-sm"},[s("button",{staticClass:"btn btn-warning mr-2",on:{click:function(o){return t.modifyWorkshop(i)}}},[t._v("修改")]),s("button",{staticClass:"btn btn-danger",on:{click:function(o){return t.deleteWorkshop(i)}}},[t._v("删除")])])])])})),0)])])])])])]),s("div",{class:["modal","fade",t.showModal?"show":""],style:t.showModal?t.MODAL_STYLE_WHEN_ACTIVE:t.MODAL_STYLE_WHEN_HIDE,attrs:{tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"vCenterModalTitle"}},[t._v("修改车间")]),s("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.closeForm}},[s("span",[t._v("×")])])]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("车间名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.workshopOnEditing.name,expression:"workshopOnEditing.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"输入车间名"},domProps:{value:t.workshopOnEditing.name},on:{input:function(o){o.target.composing||t.$set(t.workshopOnEditing,"name",o.target.value)}}})])]),s("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("生产零件")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.workshopOnEditing.productId,expression:"workshopOnEditing.productId"}],staticClass:"form-control",on:{change:function(o){var s=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){var o="_value"in t?t._value:t.value;return o}));t.$set(t.workshopOnEditing,"productId",o.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("选择零件")]),t._l(t.products,(function(o,i){return s("option",{key:i,domProps:{value:o.id}},[t._v(" "+t._s(o.name)+" ")])}))],2)])]),s("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("样本容量")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.workshopOnEditing.batchSize,expression:"workshopOnEditing.batchSize"}],staticClass:"form-control",attrs:{type:"text",placeholder:"输入样本容量"},domProps:{value:t.workshopOnEditing.batchSize},on:{input:function(o){o.target.composing||t.$set(t.workshopOnEditing,"batchSize",o.target.value)}}})])]),s("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("观察点数目")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.workshopOnEditing.windowSize,expression:"workshopOnEditing.windowSize"}],staticClass:"form-control",attrs:{type:"text",placeholder:"输入观察点数目"},domProps:{value:t.workshopOnEditing.windowSize},on:{input:function(o){o.target.composing||t.$set(t.workshopOnEditing,"windowSize",o.target.value)}}})])]),s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("备注")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.workshopOnEditing.description,expression:"workshopOnEditing.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"输入备注"},domProps:{value:t.workshopOnEditing.description},on:{input:function(o){o.target.composing||t.$set(t.workshopOnEditing,"description",o.target.value)}}})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modifying>=0,expression:"modifying >= 0"}],staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("h6",{staticStyle:{"background-color":"lightgrey"}},[t._v("注：修改样本容量将导致样本的级联删除！")])])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.closeForm}},[t._v("取消")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.resetForm}},[t._v("重置")]),s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.saveWorkshop}},[t._v("保存")])]),s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("HintMessage",{ref:"modal_hint",attrs:{"is-error":!0,"hint-msg":t.modalHintMsg}})],1)])])])]),s("v-dialog-modal",{ref:"dialog",attrs:{title:"确认删除",text:"您真的要删除吗？"},on:{"on-confirm":t.confirmDelete}}),s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("HintMessage",{ref:"hint",attrs:{"hint-msg":t.hintMsg.text,"is-error":t.hintMsg.isError}})],1)]),s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("button",{staticClass:"btn btn-primary btn-lg",on:{click:t.addWorkshop}},[t._v("添加新车间")])])])],1)},n=[function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"page-header"},[s("ol",{staticClass:"breadcrumb"},[s("li",[t._v("车间管理")])])])},function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("thead",[s("tr",[s("th",[t._v("车间号")]),s("th",[t._v("车间名")]),s("th",[t._v("生产零件")]),s("th",[t._v("样本容量")]),s("th",[t._v("观察点数目")]),s("th",[t._v("备注")]),s("th",[t._v("操作")])])])}],e=(s("a434"),s("b0c0"),s("5a7b")),a=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{class:["modal","fade","bd-example-modal-sm",t.showing?"show":""],style:t.showing?t.MODAL_STYLE_WHEN_ACTIVE:t.MODAL_STYLE_WHEN_HIDE,attrs:{tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog modal-sm"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))]),s("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.close}},[s("span",[t._v("×")])])]),s("div",{staticClass:"modal-body"},[t._v(" "+t._s(t.text)+" ")]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.reject}},[t._v("否")]),s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.resolve}},[t._v("是")])])])])])},r=[],l={name:"v-dialog-modal",props:["title","text"],data:function(){return{showing:!1,MODAL_STYLE_WHEN_HIDE:"display: none",MODAL_STYLE_WHEN_ACTIVE:"display: block; padding-right: 16px;"}},methods:{reject:function(){this.$emit("on-cancel"),this.showing=!1},resolve:function(){this.$emit("on-confirm"),this.showing=!1},close:function(){this.$emit("on-close"),this.showing=!1},show:function(){this.showing=!0}}},c=l,d=s("2877"),h=Object(d["a"])(c,a,r,!1,null,"6c27b105",null),m=h.exports,u=s("0d6a"),p={name:"WorkshopManager",components:{HintMessage:u["a"],VDialogModal:m},data:function(){return{workshops:null,workshopOnEditing:{id:"",name:"",productId:"",batchSize:"",windowSize:"",description:""},hintMsg:{isError:!1,text:""},modalHintMsg:"",modifying:-1,showModal:!1,deleting:-1,MODAL_STYLE_WHEN_HIDE:"display: none",MODAL_STYLE_WHEN_ACTIVE:"display: block; padding-right: 16px;"}},computed:{products:function(){return this.$store.getters["products/allProducts"]}},methods:{getProductName:function(t){for(var o=this.$store.getters["products/allProducts"],s=0;s<o.length;++s)if(o[s].id===t)return o[s].name},clearForm:function(){this.workshopOnEditing={id:"",name:"",productId:"",batchSize:"",windowSize:"",description:""}},addWorkshop:function(){this.modifying=-1,this.showModal=!0},modifyWorkshop:function(t){this.modifying=t,this.workshopOnEditing=JSON.parse(JSON.stringify(this.workshops[t])),this.showModal=!0},deleteWorkshop:function(t){this.deleting=t,this.$refs.dialog.show()},resetForm:function(){this.modifying>=0?this.workshopOnEditing=JSON.parse(JSON.stringify(this.workshops[this.modifying])):this.clearForm()},closeForm:function(){this.clearForm(),this.showModal=!1},saveWorkshop:function(){var t=this;e["a"].submitWorkshop({workshop:this.workshopOnEditing,modify:this.modifying>=0},(function(o){t.modifying>=0?t.workshops[t.modifying]=o:t.workshops.push(o),t.hintMsg.isError=!1,t.hintMsg.text=t.modifying>=0?"修改成功！":"添加成功！",t.$refs.hint.show(),t.showModal=!1,t.clearForm(),t.$store.dispatch("products/getAllProducts")}),(function(o){t.modalHintMsg=o,t.$refs.modal_hint.show()}),(function(o){t.modalHintMsg=o,t.$refs.modal_hint.show()}))},confirmDelete:function(){var t=this;e["a"].deleteWorkshop(this.workshops[this.deleting].id,(function(){t.workshops.splice(t.deleting,1),t.hintMsg.isError=!1,t.hintMsg.text="删除成功！",t.$refs.hint.show()}),(function(o){t.hintMsg.isError=!0,t.hintMsg.text=o,t.$refs.hint.show()}),(function(o){t.hintMsg.isError=!0,t.hintMsg.text=o,t.$refs.hint.show()}))}},mounted:function(){var t=this;e["a"].getAllWorkshopsInfo((function(o){return t.workshops=o}),(function(t){console.log(t)}))}},g=p,v=Object(d["a"])(g,i,n,!1,null,"1ca52c0c",null);o["default"]=v.exports},b0c0:function(t,o,s){var i=s("83ab"),n=s("9bf2").f,e=Function.prototype,a=e.toString,r=/^\s*function ([^ (]*)/,l="name";i&&!(l in e)&&n(e,l,{configurable:!0,get:function(){try{return a.call(this).match(r)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-228a36de.6411b400.js.map