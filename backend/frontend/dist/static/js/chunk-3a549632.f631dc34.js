(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a549632"],{"0d6a":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.showHint,expression:"showHint"}],class:["alert",t.isError?"alert-danger":"alert-success"]},[t._v(t._s(t.hintMsg))])},o=[],i={name:"HintMessage",data:function(){return{showHint:!1,showTime:1500}},props:["isError","hintMsg"],methods:{show:function(){var t=this;t.showHint=!0,setTimeout((function(){t.showHint=!1}),t.showTime)}}},l=i,c=s("2877"),r=Object(c["a"])(l,a,o,!1,null,"88f5cfde",null);e["a"]=r.exports},"4b93":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-container"},[s("div",{staticClass:"page-header"},[s("ol",{staticClass:"breadcrumb"},[s("li",[s("a",{class:t.modificationShown?"active":"",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.showOrHideModification(!1)}}},[t._v("添加零件")])]),t._v(" | "),s("li",[s("a",{class:t.modificationShown?"":"active",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.showOrHideModification(!0)}}},[t._v("修改零件")])])])]),s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("HintMessage",{ref:"deleteHint",attrs:{hintMsg:t.hintMsgDelete.text,isError:t.hintMsgDelete.isError}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modificationShown,expression:"modificationShown"}],staticClass:"card"},[t._m(0),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.modifyData.select,expression:"modifyData.select"}],staticClass:"custom-select",attrs:{disabled:t.modifyData.selected},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.modifyData,"select",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"default",disabled:""}},[t._v("选一个零件")]),t._l(t.allProducts,(function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(" "+t._s(e.name)+" ")])}))],2),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.loadProduct}},[t._v(t._s(t.modifyData.selected?"重选":"确定"))])])])])]),s("div",{staticClass:"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.modifyData.selected,expression:"modifyData.selected"}],staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteProduct}},[t._v(" 删除该零件 ")])])])]),s("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12"},[s("div",{staticClass:"form-group float-right"},[s("div",{staticClass:"input-group"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.modifyData.selected,expression:"modifyData.selected"}],staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.reloadProduct}},[t._v(" 重置表单 ")])])])])])])])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modificationShown||t.modifyData.selected,expression:"!modificationShown || modifyData.selected"}],staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("div",{staticClass:"card"},[t._m(1),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"productName"}},[t._v("零件名称")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.productForm.name,expression:"productForm.name"}],staticClass:"form-control",attrs:{type:"text",id:"productName",placeholder:"输入零件名称"},domProps:{value:t.productForm.name},on:{input:function(e){e.target.composing||t.$set(t.productForm,"name",e.target.value)}}})])]),s("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"productClass"}},[t._v("零件型号")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.productForm.type,expression:"productForm.type"}],staticClass:"form-control",attrs:{type:"text",id:"productClass",placeholder:"输入型号"},domProps:{value:t.productForm.type},on:{input:function(e){e.target.composing||t.$set(t.productForm,"type",e.target.value)}}})])])])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modificationShown||t.modifyData.selected,expression:"!modificationShown || modifyData.selected"}],staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("div",{staticClass:"card"},[t._m(2),s("div",{staticClass:"card-body"},[t._m(3),t._l(t.productForm.parameters,(function(e,a){return s("div",{key:a,staticClass:"row gutters"},[s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("div",{staticClass:"form-group"},[s("input",{staticClass:"form-control",staticStyle:{"text-align":"center"},attrs:{type:"text",readonly:""},domProps:{value:a+1}})])]),s("div",{staticClass:"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"para.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.name},on:{input:function(s){s.target.composing||t.$set(e,"name",s.target.value)}}})])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.value_type,expression:"para.value_type"}],staticClass:"custom-select",attrs:{disabled:t.modifyData.selected},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"value_type",s.target.multiple?a:a[0])}}},[s("option",{attrs:{value:"variable_data"}},[t._v("计量型")]),s("option",{attrs:{value:"attribute_data"}},[t._v("计数型")])])])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.scale,expression:"para.scale"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.scale},on:{input:function(s){s.target.composing||t.$set(e,"scale",s.target.value)}}})])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.unit,expression:"para.unit"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.unit},on:{input:function(s){s.target.composing||t.$set(e,"unit",s.target.value)}}})])]),s("div",{staticClass:"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12"},[s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.graph_type,expression:"para.graph_type"}],staticClass:"custom-select",on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"graph_type",s.target.multiple?a:a[0])}}},[s("option",{attrs:{value:"default",disabled:""}},[t._v("选择控制图类型")]),t._l(t.getModels(e),(function(e,a){return s("option",{key:a,domProps:{value:e}},[t._v(t._s(e))])}))],2)])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.usl,expression:"para.usl"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.usl},on:{input:function(s){s.target.composing||t.$set(e,"usl",s.target.value)}}})])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.lsl,expression:"para.lsl"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.lsl},on:{input:function(s){s.target.composing||t.$set(e,"lsl",s.target.value)}}})])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"para.description"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.description},on:{input:function(s){s.target.composing||t.$set(e,"description",s.target.value)}}})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modificationShown&&t.productForm.parameters.length>1,expression:"!modificationShown && productForm.parameters.length > 1"}],staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-danger icon-delete",on:{click:function(e){return t.remove(a)}}})])])])})),s("button",{directives:[{name:"show",rawName:"v-show",value:!t.modificationShown,expression:"!modificationShown"}],staticClass:"btn btn-primary",attrs:{id:"addItem",type:"button"},on:{click:t.add}},[t._v("增加一项")])],2)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modificationShown||t.modifyData.selected,expression:"!modificationShown || modifyData.selected"}],staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"summary"}},[t._v("批注")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.productForm.description,expression:"productForm.description"}],staticClass:"form-control",attrs:{id:"summary",rows:"3"},domProps:{value:t.productForm.description},on:{input:function(e){e.target.composing||t.$set(t.productForm,"description",e.target.value)}}})])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.modificationShown||t.modifyData.selected,expression:"!modificationShown || modifyData.selected"}],staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("HintMessage",{ref:"resultHint",attrs:{isError:t.hintMsg.isError,hintMsg:t.hintMsg.text}}),s("button",{staticClass:"btn btn-primary mb-2",attrs:{type:"submit"},on:{click:t.submitProduct}},[t._v("提交")])],1)])])])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"card-title"},[t._v("选择零件")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"card-title"},[t._v("基本信息")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"card-title"},[t._v("参数信息")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row gutters"},[s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("h6",{staticClass:"text-center"},[t._v("编号")])]),s("div",{staticClass:"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12"},[s("h6",{staticClass:"text-center"},[t._v("属性名称")])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("h6",{staticClass:"text-center"},[t._v("数值类型")])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("h6",{staticClass:"text-center"},[t._v("小数位数")])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("h6",{staticClass:"text-center"},[t._v("参数单位")])]),s("div",{staticClass:"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12"},[s("h6",{staticClass:"text-center"},[t._v("控制图模型")])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("h6",{staticClass:"text-center"},[t._v("上规格限")])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("h6",{staticClass:"text-center"},[t._v("下规格限")])]),s("div",{staticClass:"col-xl-1 col-lg-1 col-md-1 col-sm-1 col-12"},[s("h6",{staticClass:"text-center"},[t._v("备注")])])])}],i=(s("4160"),s("a434"),s("159b"),s("0d6a")),l={name:"ProductManager",components:{HintMessage:i["a"]},data:function(){return{productForm:{name:"",type:"",description:"",parameters:[{name:"",value_type:"variable_data",scale:"",unit:"",graph_type:"default",usl:"",lsl:"",description:""}]},hintMsg:{isError:!1,text:""},hintMsgDelete:{isError:!1,text:""},modificationShown:!1,modifyData:{selected:!1,select:"default"}}},computed:{allProducts:function(){return 0===this.$store.getters["warehouse_products/allProducts"].length&&this.$store.dispatch("warehouse_products/getAllProducts"),this.$store.getters["warehouse_products/allProducts"]}},methods:{getEmptyParameter:function(){return{name:"",value_type:"variable_data",scale:"",unit:"",graph_type:"default",usl:"",lsl:"",description:""}},clearForm:function(t){t.productForm={productName:"",productType:"",description:"",parameters:[t.$options.methods.getEmptyParameter()]}},add:function(){this.productForm.parameters.push(this.$options.methods.getEmptyParameter())},remove:function(t){this.productForm.parameters.splice(t,1)},getModels:function(t){return"attribute_data"===t.value_type?["p","np","u","c"]:this.modifyData.selected?"IMR"!==t.graph_type?["Xbar-s","Xbar-R"]:["I-MR"]:["Xbar-s","Xbar-R","I-MR"]},submitProduct:function(){var t=this;this.$store.dispatch("warehouse_products/submitProduct",{productForm:this.productForm,modification:{modify:this.modifyData.selected,index:this.modifyData.select}}).then((function(e){t.hintMsg.isError=!1,t.hintMsg.text=e,t.$refs.resultHint.show(),setTimeout((function(){t.$options.methods.clearForm(t),t.modifyData.selected=!1}),1600)})).catch((function(e){t.hintMsg.isError=!0,t.hintMsg.text=e,t.$refs.resultHint.show()}))},showOrHideModification:function(t){t^this.modificationShown&&(this.modificationShown=!this.modificationShown,this.$options.methods.clearForm(this),this.modifyData.selected=!1,this.modifyData.select="default")},loadProduct:function(){if(this.modifyData.selected)return this.modifyData.selected=!1,void this.$options.methods.clearForm(this);"default"!==this.modifyData.select&&(this.productForm=JSON.parse(JSON.stringify(this.allProducts[this.modifyData.select])),this.productForm.parameters.forEach((function(t){"UNCOUNTABLE"===t.value_type?t.value_type="variable_data":t.value_type="attribute_data"})),this.modifyData.selected=!0)},reloadProduct:function(){this.productForm=JSON.parse(JSON.stringify(this.allProducts[this.modifyData.select]))},deleteProduct:function(){var t=this;this.$store.dispatch("warehouse_products/deleteProduct",this.modifyData.select).then((function(){t.hintMsgDelete.isError=!1,t.hintMsgDelete.text="删除成功！",t.$refs.deleteHint.show(),t.modifyData.selected=!1,t.$options.methods.clearForm(t)})).catch((function(e){t.hintMsgDelete.isError=!0,t.hintMsgDelete.text=e,t.$refs.deleteHint.show()}))}}},c=l,r=(s("b409"),s("2877")),n=Object(r["a"])(c,a,o,!1,null,"081b7e24",null);e["default"]=n.exports},9845:function(t,e,s){},b409:function(t,e,s){"use strict";s("9845")}}]);
//# sourceMappingURL=chunk-3a549632.f631dc34.js.map