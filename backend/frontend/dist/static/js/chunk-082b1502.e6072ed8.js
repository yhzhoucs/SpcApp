(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-082b1502"],{"30af":function(t,e,a){},"425f":function(t,e,a){"use strict";a("8a6b")},"7db0":function(t,e,a){"use strict";var s=a("23e7"),n=a("b727").find,i=a("44d2"),r=a("ae40"),l="find",c=!0,o=r(l);l in[]&&Array(1)[l]((function(){c=!1})),s({target:"Array",proto:!0,forced:c||!o},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(l)},"7e06":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-container"},[t._m(0),a("div",{class:["modal","fade","bd-example-modal-xl","show"],style:0===t.current?t.MODAL_STYLE_WHEN_ACTIVE:t.MODAL_STYLE_WHEN_HIDE,attrs:{tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-xl"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("选择测量计划")]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.closeModal}},[a("span",[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.current,expression:"current === 0"}],staticClass:"row gutters"},[a("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[a("div",{staticClass:"card"},[t._m(1),a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered table-danger m-0"},[t._m(2),a("tbody",t._l(t.measurePlans,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),a("td",[t._v(t._s(e.warehouse.name))]),a("td",[t._v(t._s(e.storageCellId))]),a("td",[t._v(t._s(e.product.name))]),a("td",[t._v(t._s(e.batchSize))]),a("td",[t._v(t._s(e.batch))]),a("td",{staticClass:"col-2"},[a("div",[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.parameterSelected.id,expression:"p.parameterSelected.id"}],staticClass:"form-control form-control-sm",on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e.parameterSelected,"id",a.target.multiple?s:s[0])}}},t._l(e.product.parameters,(function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)])])]),a("td",[a("div",{staticClass:"btn-group-sm"},[a("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.getControlGraphByDefault(s)}}},[t._v("查看控制图")])])])])})),0)])])])])])])])])])]),a("div",{staticClass:"row gutters"},[a("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",on:{click:t.back}},[t._m(3),a("div",{staticClass:"mb-4"})])]),a("div",{staticClass:"row gutters"},[a("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("p",{staticClass:"font-weight-bold"},[t._v("指定时间段")]),a("DateRangePicker",{attrs:{triggered:t.timeTriggered},on:{"submit-date-range":function(e){return t.getControlGraphByDateRange(e)},back:t.backToDefault}})],1)])])]),a("div",{staticClass:"row gutters"},[a("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3"},[a("div",{staticClass:"card"},[t._m(4),a("div",{staticClass:"card-body"},[a("div",{staticClass:"slimScrollDiv",staticStyle:{position:"relative",width:"auto",height:"800px"}},[a("ul",{staticClass:"statistics"},[a("li",[t._m(5),t._v(" 测量计划编号："+t._s(t.measurePlanSelected.id)+" ")]),a("li",[t._m(6),t._v(" 仓库名："+t._s(t.measurePlanSelected.warehouse.name)+" ")]),a("li",[t._m(7),t._v(" 储位编号："+t._s(t.measurePlanSelected.storageCellId)+" ")]),a("li",[t._m(8),t._v(" 产品名："+t._s(t.measurePlanSelected.product.name)+" ")]),a("li",[t._m(9),t._v(" 属性名："+t._s(t.measurePlanSelected.parameterSelected.id)+" ")]),a("li",[t._m(10),t._v(" 单位："+t._s(t.measurePlanSelected.parameterSelected.unit)+" ")]),a("li",[t._m(11),t._v(" 小数位数："+t._s(t.measurePlanSelected.parameterSelected.scale)+" ")]),a("li",[t._m(12),t._v(" 控制图类型："+t._s(t.measurePlanSelected.parameterSelected.graph_type)+" ")]),a("li",[t._m(13),t._v(" USL："+t._s(t.measurePlanSelected.parameterSelected.usl)+" ")]),a("li",[t._m(14),t._v(" LSL："+t._s(t.measurePlanSelected.parameterSelected.lsl)+" ")])])])])])]),t._m(15)]),a("div",{staticClass:"row gutters"},[a("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("button",{staticClass:"btn btn-primary float-right",attrs:{type:"button"},on:{click:t.getAbnormalityReport}},[t._v("查看当前异常分析报告")])])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header"},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item"},[t._v("SPC控制图")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("div",{staticClass:"title"},[t._v("测量计划列表")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("测量计划编号")]),a("th",[t._v("仓库名")]),a("th",[t._v("储位编号")]),a("th",[t._v("零件名")]),a("th",[t._v("批容量")]),a("th",[t._v("批数")]),a("th",[t._v("属性")]),a("th",[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ml-2 back-btn"},[a("span",{staticClass:"icon-log-out"}),a("span",{staticClass:"font-weight-bolder"},[t._v("选择测量计划")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("div",{staticClass:"card-title"},[t._v("基本信息")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"stat-icon bg-info"},[a("i",{staticClass:"icon-eye1"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"stat-icon bg-danger"},[a("i",{staticClass:"icon-thumbs-up1"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"stat-icon bg-warning"},[a("i",{staticClass:"icon-star2"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"stat-icon bg-success"},[a("i",{staticClass:"icon-shopping-bag1"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"stat-icon bg-info"},[a("i",{staticClass:"icon-check-circle"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"stat-icon bg-danger"},[a("i",{staticClass:"icon-clipboard"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"stat-icon bg-warning"},[a("i",{staticClass:"icon-eye1"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"stat-icon bg-success"},[a("i",{staticClass:"icon-thumbs-up1"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"stat-icon bg-info"},[a("i",{staticClass:"icon-star2"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"stat-icon bg-danger"},[a("i",{staticClass:"icon-shopping-bag1"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"card-title"},[t._v("控制图")])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"chart",attrs:{id:"main"}})])])])}],i=(a("7db0"),a("4160"),a("159b"),a("64dc")),r=a("22b4"),l=a("1be7"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-date-picker",{attrs:{"model-config":t.modelConfig,"is-range":""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.inputValue,n=e.inputEvents;return[a("div",{staticClass:"flex justify-center items-center"},[a("label",[t._v("开始日期：")]),a("input",t._g({staticClass:"border px-2 py-1 w-25 rounded focus:outline-none focus:border-indigo-300",domProps:{value:s.start}},n.start)),a("svg",{staticClass:"w-4 h-4 mx-2",attrs:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[a("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"}})]),a("label",[t._v("结束日期：")]),a("input",t._g({staticClass:"border px-2 py-1 w-25 rounded focus:outline-none focus:border-indigo-300",domProps:{value:s.end}},n.end)),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submitDateRange}},[t._v("确定")]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.triggered,expression:"triggered"}],staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.back}},[t._v("返回")])])]}}]),model:{value:t.range,callback:function(e){t.range=e},expression:"range"}})},o=[],d={name:"DateRangePicker",props:["triggered"],data:function(){return{range:{start:new Date,end:new Date},modelConfig:{start:{type:"string",mask:"YYYY-MM-DD"},end:{type:"string",mask:"YYYY-MM-DD"}}}},methods:{submitDateRange:function(){this.$emit("submit-date-range",this.range)},back:function(){this.$emit("back")}}},u=d,m=(a("425f"),a("2877")),v=Object(m["a"])(u,c,o,!1,null,"58afb484",null),_=v.exports,p=a("9394"),f=a("3094"),g=a("2da7"),h=a("4b2a"),C=a("ff32"),b=a("9502"),y=a("3620"),S=a("f95e");r["a"]([p["a"],f["a"],g["a"],h["a"],C["a"],b["a"],y["a"],S["a"]]);var w={name:"ControlGraph",components:{DateRangePicker:_},computed:{requestTemplate:function(){var t={measurePlanId:this.measurePlanSelected.id,parameterId:this.measurePlanSelected.parameterSelected.id,start_time:null,end_time:null,analyze:!1};return Object.assign({},t)}},data:function(){return{measurePlans:[],measurePlanSelected:{id:"",warehouse:{name:"",id:""},product:{name:""},parameterSelected:{id:"",unit:"",scale:"",graph_type:"",usl:"",lsl:""}},timeRange:null,timeTriggered:!1,myChart:null,current:1,MODAL_STYLE_WHEN_HIDE:"display: none",MODAL_STYLE_WHEN_ACTIVE:"display: block"}},methods:{closeModal:function(){this.current=1},getControlGraphByDefault:function(t){var e=this;this.measurePlanSelected=this.measurePlans[t],this.measurePlanSelected.parameterSelected=this.measurePlanSelected.product.parameters.find((function(t){return t.id===e.measurePlanSelected.parameterSelected.id}));var a=this.requestTemplate;a.analyze=!1,i["a"].getControlGraph(a,(function(t){e.current=1,t&&e.myChart.setOption(t,!0),e.timeTriggered=!1}),(function(t){console.log(t)}))},backToDefault:function(){var t=this,e=this.requestTemplate;e.analyze=!1,i["a"].getControlGraph(e,(function(e){e&&t.myChart.setOption(e,!0),t.timeTriggered=!1}),(function(t){console.log(t)}))},getControlGraphByDateRange:function(t){var e=this;this.timeRange=t;var a=this.requestTemplate;a.analyze=!1,a.start_time=t.start,a.end_time=t.end,i["a"].getControlGraph(a,(function(t){t&&e.myChart.setOption(t,!0),e.timeTriggered=!0}),(function(t){console.log(t)}))},getAbnormalityReport:function(){var t=this,e=this.requestTemplate;this.timeTriggered&&(e.start_time=this.timeRange.start,e.end_time=this.timeRange.end),e.analyze=!0,i["a"].getControlGraph(e,(function(e){localStorage.removeItem("analysisReportHtml"),localStorage.setItem("analysisReportHtml",e);var a=t.$router.resolve({path:"/analysis_report_detail"}),s=a.href;window.open(s,"_blank")}),(function(t){return console.log(t)}))},back:function(){this.current=0}},mounted:function(){var t=this;i["a"].getMeasurePlans((function(e){t.measurePlans=e,t.measurePlans.forEach((function(t){t["parameterSelected"]=Object.assign({},t.product.parameters[0])})),t.getControlGraphByDefault(0)}),(function(t){return console.log(t)}));var e=document.getElementById("main");this.myChart=l["b"](e);var a=this.myChart;window.onresize=function(){a.resize()}}},k=w,E=(a("b62f"),Object(m["a"])(k,s,n,!1,null,"6f71a75a",null));e["default"]=E.exports},"8a6b":function(t,e,a){},b62f:function(t,e,a){"use strict";a("30af")}}]);
//# sourceMappingURL=chunk-082b1502.e6072ed8.js.map