(function(t){function e(e){for(var o,r,c=e[0],s=e[1],i=e[2],d=0,f=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);l&&l(e);while(f.length)f.shift()();return u.push.apply(u,i||[]),n()}function n(){for(var t,e=0;e<u.length;e++){for(var n=u[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(u.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},a={app:0},u=[];function c(t){return s.p+"static/js/"+({}[t]||t)+"."+{"chunk-0ba778b5":"a2de0301","chunk-1bb63c14":"7fb72a26","chunk-228a36de":"58d638ec","chunk-2d0a2df4":"8b092d1c","chunk-5b60dfd0":"417d1651","chunk-74ac1c6a":"e4e45eb3","chunk-80f21394":"c186d9ad","chunk-a7b5da0a":"305214be","chunk-2d0c9399":"1ef9e178","chunk-2d212c60":"69aacfce","chunk-aa2e4938":"8f4309f9"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-0ba778b5":1,"chunk-1bb63c14":1,"chunk-74ac1c6a":1,"chunk-80f21394":1,"chunk-aa2e4938":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var o="static/css/"+({}[t]||t)+"."+{"chunk-0ba778b5":"448d45d5","chunk-1bb63c14":"23f9d832","chunk-228a36de":"31d6cfe0","chunk-2d0a2df4":"31d6cfe0","chunk-5b60dfd0":"31d6cfe0","chunk-74ac1c6a":"07a26709","chunk-80f21394":"623a598d","chunk-a7b5da0a":"31d6cfe0","chunk-2d0c9399":"31d6cfe0","chunk-2d212c60":"31d6cfe0","chunk-aa2e4938":"18808053"}[t]+".css",a=s.p+o,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var i=u[c],d=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(d===o||d===a))return e()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){i=f[c],d=i.getAttribute("data-href");if(d===o||d===a)return e()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=e,l.onerror=function(e){var o=e&&e.target&&e.target.src||a,u=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=o,delete r[t],l.parentNode.removeChild(l),n(u)},l.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(l)})).then((function(){r[t]=0})));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var u=new Promise((function(e,n){o=a[t]=[e,n]}));e.push(o[2]=u);var i,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=c(t);var f=new Error;i=function(e){d.onerror=d.onload=null,clearTimeout(l);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;f.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",f.name="ChunkLoadError",f.type=o,f.request=r,n[1](f)}a[t]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:d})}),12e4);d.onerror=d.onload=i,document.head.appendChild(d)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=e,i=i.slice();for(var f=0;f<i.length;f++)e(i[f]);var l=d;u.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"56d7":function(t,e,n){"use strict";n.r(e);n("d3b7");var o=n("5530"),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},u=[],c=(n("034f"),n("2877")),s={},i=Object(c["a"])(s,a,u,!1,null,null,null),d=i.exports,f=n("8c4f");r["default"].use(f["a"]);var l=[{path:"/login",name:"Login",component:function(){return Promise.all([n.e("chunk-a7b5da0a"),n.e("chunk-2d0c9399")]).then(n.bind(null,"57de"))}}],h=[{path:"/",redirect:{path:"/home"}},{path:"/home",name:"Home",component:function(){return n.e("chunk-1bb63c14").then(n.bind(null,"bb51"))},children:[{path:"controlGraph/:proIndex/:parIndex",component:function(){return n.e("chunk-80f21394").then(n.bind(null,"0710"))},meta:{role:["admin","super_editor","viewer"],isSidebarItem:!1,subsystem:"workshop"}},{path:"productManager",component:function(){return n.e("chunk-aa2e4938").then(n.bind(null,"a96f"))},meta:{role:["admin","super_editor"],isSidebarItem:!0,subsystem:"workshop",sidebarInfo:{name:"零件管理",iconClass:"icon-plus-circle"}}},{path:"workshopManager",component:function(){return n.e("chunk-228a36de").then(n.bind(null,"54e8"))},meta:{role:["admin","super_editor"],isSidebarItem:!0,subsystem:"workshop",sidebarInfo:{name:"车间管理",iconClass:"icon-archive1"}}},{path:"analysisReports",component:function(){return n.e("chunk-2d0a2df4").then(n.bind(null,"0086"))},meta:{role:["admin","super_editor","viewer"],isSidebarItem:!0,subsystem:"workshop",sidebarInfo:{name:"异常警报",iconClass:"icon-bell"}}},{path:"UserManage",component:function(){return n.e("chunk-0ba778b5").then(n.bind(null,"27fc"))},meta:{role:["admin","super_editor"],isSidebarItem:!0,subsystem:"workshop",sidebarInfo:{name:"用户管理",iconClass:"icon-grid"}}},{path:"analysisReportDetail/:index",name:"ReportDetail",component:function(){return n.e("chunk-5b60dfd0").then(n.bind(null,"9c37"))},meta:{role:["admin","super_editor","viewer"],isSidebarItem:!1,subsystem:"workshop"}},{path:"accountSettings",component:function(){return Promise.all([n.e("chunk-a7b5da0a"),n.e("chunk-2d212c60")]).then(n.bind(null,"aa9c"))},meta:{role:["admin","super_editor","viewer"],isSidebarItem:!0,sidebarInfo:{name:"账户设置",iconClass:"icon-user1"}}},{path:"404",name:"Small404",component:function(){return n.e("chunk-74ac1c6a").then(n.bind(null,"2a3e"))}}],meta:{role:["admin","super_editor","viewer"],isSidebarItem:!1}},{path:"/404",component:function(){return n.e("chunk-74ac1c6a").then(n.bind(null,"2a3e"))}},{path:"*",redirect:"/404",hidden:!0}],p=new f["a"]({mode:"history",base:"/",routes:l}),m=p,g=n("2f62"),b=n("bc3a"),k=n.n(b),v=n("c24f"),w=function(){return{status:"",token:localStorage.getItem("token")||"",user:null}},y={authRequest:function(t){t.status="auth_loading"},authSuccess:function(t,e){t.status="auth_success",t.token=e},authFail:function(t){t.status="auth_fail"},authError:function(t){t.status="auth_error"},setUser:function(t,e){t.user=e},logout:function(t){t.status="",t.token="",t.user=null},updateUser:function(t,e){console.log("Here in mutations"),console.log(e),t.user=e}},P={login:function(t,e){var n=t.commit;return new Promise((function(t,o){n("authRequest"),v["a"].confirmLogin(e,(function(e){localStorage.setItem("token",e),k.a.defaults.headers.common["Authentication"]=e,n("authSuccess",e),t()}),(function(t){n("authFail"),localStorage.removeItem("token"),o(t)}),(function(t){n("authError"),localStorage.removeItem("token"),o(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t,n){e("logout");try{localStorage.removeItem("token"),delete k.a.defaults.headers.common["Authorization"],t()}catch(o){n(o)}}))},getUserInfo:function(t){var e=t.commit;return new Promise((function(t,n){v["a"].getUserInfo((function(n){e("setUser",n),t(n)}),(function(t){return n(t)}),(function(t){return n(t)}))}))},updateUserInfo:function(t,e){var n=t.commit;return new Promise((function(t,o){v["a"].updateUserInfo(e,(function(e){n("updateUser",e),t()}),(function(t){return o(t)}),(function(t){return o(t)}))}))},modifyPwd:function(t,e){t.commit;return new Promise((function(t,n){v["a"].modifyPwd(e,(function(){t()}),(function(t){return n(t)}),(function(t){return n(t)}))}))}},S={isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status},currentUser:function(t){return t.user}},I={namespaced:!0,state:w,getters:S,actions:P,mutations:y},R=(n("a434"),n("5a7b")),_=function(){return{status:"",all:[]}},A={loading:function(t){t.status="loading"},loadFail:function(t){t.status="fail"},setProducts:function(t,e){t.status="loaded",t.all=e},addProduct:function(t,e){t.all.push(e)},deleteProduct:function(t,e){t.all.splice(e,1)},modifyProduct:function(t,e){t.all[e.index]=e.product;var n=t.all;t.all=[],t.all=n}},M={getAllProducts:function(t){var e=t.commit;return new Promise((function(t,n){e("loading"),R["a"].getAllProducts((function(n){e("setProducts",n),t(n)}),(function(t){return n(t)}),(function(t){return n(t)}))}))},submitProduct:function(t,e){var n=t.commit,o=e.productForm,r=e.modification;return new Promise((function(t,e){n("loading"),R["a"].submitProduct(o,r.modify,(function(e){r.modify?(n("modifyProduct",{index:r.index,product:e}),t("修改成功！")):(n("addProduct",e),t("添加成功！"))}),(function(t){e(t)}),(function(t){n("loadFail"),e(t)}))}))},deleteProduct:function(t,e){var n=t.commit,o=t.state;return new Promise((function(t,r){R["a"].deleteProduct(o.all[e].id,(function(){n("deleteProduct",e),t()}),(function(t){return r(t)}),(function(t){return r(t)}))}))}},x={allProducts:function(t){return t.all},loadStatus:function(t){return t.status}},U={namespaced:!0,state:_,getters:x,actions:M,mutations:A},E=function(){return{status:"",all:[]}},O={loading:function(t){t.status="loading"},loadFail:function(t){t.status="fail"},setReports:function(t,e){t.status="loaded",t.all=e},markReportAsRead:function(t,e){if(!t.all[e].read){for(var n=t.all,o=e,r=n[o];o<n.length-1;++o){if(n[o+1].read)break;n[o]=n[o+1]}r.read=!0,n[o]=r,t.all=null,t.all=n}}},C={getAllExceptionReports:function(t){var e=t.commit;return new Promise((function(t,n){R["a"].getAllExceptionReports((function(n){e("setReports",n),t()}),(function(t){return n(t)}),(function(t){return n(t)}))}))},getReportDetailHtml:function(t,e){var n=t.commit;return new Promise((function(t,o){R["a"].getReportDetailHtml(e.id,(function(o){n("markReportAsRead",e.index),t(o)}),(function(t){return o(t)}),(function(t){return o(t)}))}))}},j={reports:function(t){return t.all},hasReport:function(t){return t.all.length>0},numberOfUnreadReports:function(t){var e=t.all;if(0===e.length)return 0;var n=0,o=e.length-1;while(o-n>1){var r=n+Math.floor((o-n)/2);e[r].read?o=r:n=r}return e[n].read?n:e[o].read?n+1:o+1}},D={namespaced:!0,state:E,getters:j,actions:C,mutations:O};n("99af"),n("4de4"),n("c975");function G(t,e){return!e.meta||!e.meta.role||e.meta.role.indexOf(t)>=0}var L=function(){return{routes:l,customRoutes:[]}},F={setRoutes:function(t,e){t.customRoutes=e,t.routes=l.concat(e)}},T={generateRoutes:function(t,e){var n=t.commit;return new Promise((function(t){var o=h.filter((function(t){return!!G(e,t)&&(t.children&&t.children.length>0&&(t.children=t.children.filter((function(t){return!!G(e,t)&&t}))),t)}));n("setRoutes",o),t()}))}},W={routes:function(t){return t.routes},customRoutes:function(t){return t.customRoutes}},H={namespaced:!0,state:L,getters:W,actions:T,mutations:F},q=function(){return{sub_sys:"workshop"}},N={changeSubSys:function(t,e){t.sub_sys=e}},B={changeSubSys:function(t){var e=t.commit,n=t.state;return new Promise((function(t,o){try{"workshop"===n.sub_sys?(e("changeSubSys","warehouse"),t("warehouse")):(e("changeSubSys","workshop"),t("workshop"))}catch(r){o()}}))}},J={current_sub_sys:function(t){return t.sub_sys}},$={namespaced:!0,state:q,getters:J,actions:B,mutations:N};r["default"].use(g["a"]);var z=new g["a"].Store({modules:{user:I,products:U,exceptions:D,permission:H,subsystem_state:$}}),K=z,Q=n("2106"),V=n.n(Q),X=(n("4989"),n("ab8b"),n("5aea"),n("710a"),n("5887")),Y=n.n(X);r["default"].use(V.a,k.a),r["default"].config.productionTip=!1,k.a.interceptors.request.use((function(t){var e=localStorage.getItem("token");return e&&(t.headers.common["Authentication"]=e),t}),(function(t){return Promise.reject(t)})),m.beforeEach((function(t,e,n){if(K.getters["user/isLoggedIn"]){var r=K.getters["user/currentUser"];r&&r.role?n():K.dispatch("user/getUserInfo").then((function(e){K.dispatch("permission/generateRoutes",e.role).then((function(){m.addRoutes(K.getters["permission/customRoutes"]),n(Object(o["a"])(Object(o["a"])({},t),{},{replace:!0}))}))})).catch((function(t){return console.log(t)}))}else"/login"===t.fullPath?n():n("/login")})),r["default"].use(Y.a),new r["default"]({router:m,store:K,render:function(t){return t(d)}}).$mount("#app")},"5a7b":function(t,e,n){"use strict";var o=n("bc3a"),r=n.n(o),a={submitProduct:function(t,e,n,o,a){r.a.post("/api/workshop/SubmitProduct",{product:t,modify:e}).then((function(t){"success"===t.data.status?n(t.data.product):o(t.data.errorMsg)})).catch((function(){a("请求失败！")}))},getAllExceptionReports:function(t,e,n){r.a.get("/api/workshop/GetAllExceptionReports").then((function(n){"success"===n.data.status?t(n.data.reports):e(n.data.errorMsg)})).catch((function(){n("请求失败！")}))},getReportDetailHtml:function(t,e,n,o){r.a.get("/api/workshop/GetReportDetailHtml?id="+t).then((function(t){"success"===t.data.status?e(t.data.content):n(t.data.errorMsg)})).catch((function(){o("请求失败！")}))},getAllProducts:function(t,e,n){r.a.get("/api/workshop/GetAllProducts").then((function(n){"success"===n.data.status?t(n.data.products):e()})).catch((function(){n()}))},deleteProduct:function(t,e,n,o){r.a.get("/api/workshop/DeleteProduct?id="+t).then((function(t){"success"===t.data.status?e():n(t.data.errorMsg)})).catch((function(){o("请求失败！")}))},getControlGraph:function(t,e){r.a.post("/api/workshop/GetControlGraph",t).then((function(t){var n=t.data;"success"===n.status&&n.updated&&e(n.options,n.tmp_point_id)})).catch((function(t){return console.log(t)}))},getDynamicAnalysisReport:function(t,e,n){r.a.post("/api/workshop/GetControlGraph",t).then((function(t){var n=t.data;"success"===n.status&&e(n.content)})).catch((function(){return n("请求失败！")}))},getAllWorkshopsInfo:function(t,e){r.a.get("/api/workshop/GetAllWorkshopsInfo").then((function(n){"success"===n.data.status?t(n.data.workshops):e(n.data.errorMsg)})).catch((function(){return e("请求错误！")}))},submitWorkshop:function(t,e,n,o){r.a.post("/api/workshop/SubmitWorkshop",t).then((function(t){"success"===t.data.status?e(t.data.workshop):n(t.data.errorMsg)})).catch((function(){return o("请求失败！")}))},deleteWorkshop:function(t,e,n,o){r.a.get("/api/workshop/DeleteWorkshop?id="+t).then((function(t){"success"===t.data.status?e():n(t.data.errorMsg)})).catch((function(){return o("请求失败！")}))},getRelationshipForm:function(t,e,n,o){r.a.get("/api/workshop/getRelationshipForm?userid="+t).then((function(t){"success"===t.data.status?e(t.data.relationshipform):n(t.data.errorMsg)})).catch((function(){return o("请求失败")}))},submitRelatonship:function(t){r.a.post("/api/workshop/submitRelationship",t).then((function(t){"success"===t.data.status&&console.log(t)})).catch((function(t){console.log(t.data.errorMsg)}))},getAllWorkshopsId:function(t,e,n){r.a.get("/api/workshop/getAllWorkshopsId").then((function(n){"success"===n.data.status?t(n.data.workshopid):e(n.data.errorMsg)})).catch((function(){return n("请求失败")}))}};e["a"]=a},"5aea":function(t,e,n){},"710a":function(t,e,n){},"85ec":function(t,e,n){},c24f:function(t,e,n){"use strict";var o=n("bc3a"),r=n.n(o),a={confirmLogin:function(t,e,n,o){r.a.post("/api/user/ConfirmLogin",t).then((function(t){var o=t.data.status;"success"===o?e(t.data.token):n(t.data.errorMsg)})).catch((function(){o("请求失败！")}))},getUserInfo:function(t,e,n){r.a.get("/api/user/GetUserInfo").then((function(n){var o=n.data.status;"success"===o?t(n.data.user):e(n.data.errorMsg)})).catch((function(){return n("请求失败！")}))},updateUserInfo:function(t,e,n,o){r.a.post("/api/user/UpdateUserInfo",t).then((function(t){"success"===t.data.status?e(t.data.user):n(t.data.errorMsg)})).catch((function(){o("请求失败！")}))},modifyPwd:function(t,e,n,o){r.a.post("/api/user/ModifyPassword",t).then((function(t){"success"===t.data.status?e():n(t.data.errorMsg)})).catch((function(){o("请求失败！")}))},getUserId:function(t,e,n){r.a.get("/api/user/getUserId").then((function(n){"success"===n.data.status?t(n.data.userid):e(n.data.errorMsg)})).catch((function(){n("请求失败！")}))}};e["a"]=a}});
//# sourceMappingURL=app.b2cf89a1.js.map